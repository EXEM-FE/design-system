# EXEM Design System CI/CD Pipeline

stages:
  - test

# ë¦°íŠ¸ ê²€ì‚¬
lint:
  image: node:lts
  stage: test
  before_script:
    - npm install -g pnpm@8
    - pnpm install --no-frozen-lockfile
  script:
    - echo "ğŸ” ë°”ì´ì˜´ ë¦°íŠ¸ ê²€ì‚¬ ì‹œì‘..."
    - echo "ğŸ“‹ í™œì„±í™”ëœ ê²€ì‚¬ í•­ëª©:"
    - echo "  âœ“ recommended ê·œì¹™ (ëª¨ë“  ê¶Œì¥ lint ê·œì¹™)"
    - echo "  âœ“ style ê²€ì‚¬ (noNonNullAssertion ì œì™¸)" 
    - echo "  âœ“ correctness ê²€ì‚¬ (useExhaustiveDependencies: warn)"
    - echo "  âœ“ complexity ê²€ì‚¬ (noForEach, useOptionalChain ë“±)"
    - echo "  âœ“ suspicious ê²€ì‚¬ (noImplicitAnyLet, noAssignInExpressions ë“±)"
    - echo "  âœ“ í¬ë§·í„° ê²€ì‚¬ (2 spaces, 80ì ì œí•œ, LF)"
    - echo "  ğŸ“ ëŒ€ìƒ: packages/**/*.{ts,tsx,js,jsx}"
    - echo "  ğŸš« ì œì™¸: packages/*/dist/**, node_modules/**"
    - echo ""
    - pnpm lint
    - echo "âœ… ë°”ì´ì˜´ ë¦°íŠ¸ ê²€ì‚¬ ì™„ë£Œ"
  cache:
    key:
      files:
        - pnpm-lock.yaml
    paths:
      - node_modules/
  only:
    - branches
    - merge_requests

# íƒ€ì… ê²€ì‚¬
typecheck:
  image: node:lts
  stage: test
  before_script:
    - npm install -g pnpm@8
    - pnpm install --no-frozen-lockfile
  script:
    - echo "ğŸ” íƒ€ì… ê²€ì‚¬ ì‹œì‘..."
    - cd packages/design-token && pnpm build && cd ../..
    - pnpm typecheck
    - echo "âœ… íƒ€ì… ê²€ì‚¬ ì™„ë£Œ"
  cache:
    key:
      files:
        - pnpm-lock.yaml
    paths:
      - node_modules/
  only:
    - branches
    - merge_requests